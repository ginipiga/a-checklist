# 🏗️ 건설 시방서 분석 시스템

건설 시공사에서 시방서를 분석하여 **시공 체크리스트**를 자동 생성하는 프로그램입니다.

---

## 🚀 빠른 시작

### 1️⃣ Ollama로 실행 (추천)
```bash
# 배치 파일 더블클릭
실행_Ollama.bat
```

또는 명령 프롬프트에서:
```cmd
set LLM_MODE=ollama
python src\main.py
```

### 2️⃣ OpenAI로 실행 (유료)
```cmd
set LLM_MODE=openai
set OPENAI_API_KEY=sk-your-api-key
python src\main.py
```

### 3️⃣ AI 없이 실행 (기본)
```cmd
python src\main.py
```

---

## 📄 시방서 분석 방법

### 1단계: 프로그램 실행
- `실행_Ollama.bat` 파일을 더블클릭하여 실행

### 2단계: 시방서 PDF 드래그 앤 드롭
- 시방서 PDF 파일을 프로그램 창에 드래그하여 놓기
- 또는 메뉴: **파일 → PDF에서 가져오기**

### 3단계: AI 자동 분석
- AI가 시방서를 분석하여 체크리스트로 변환
- 분석 시간: 약 30초~2분 (문서 크기에 따라 다름)

### 4단계: 결과 확인
- 공종별로 정리된 체크리스트 확인
- 각 항목에는 다음이 포함됩니다:
  - ✅ **점검항목**: 무엇을 확인할지
  - 📋 **점검기준**: 허용오차, 기준값
  - 🔍 **확인방법**: 언제, 어떻게 확인할지
  - 📚 **관련근거**: 시방서 쪽수/조항

---

## 🎯 주요 기능

### 1. 시방서 자동 분석
- PDF 시방서를 드래그 앤 드롭하면 자동으로 분석
- 공종별, 공법별로 자동 분류
- 검사, 확인, 시험 항목을 자동 추출

### 2. 시공 체크리스트 생성
AI가 다음 항목을 자동으로 추출합니다:

#### 반드시 추출되는 항목 (키워드 기반)
- "검사", "확인", "시험", "품질"
- "측정", "계측", "검수", "승인"
- "허용오차", "기록", "제출"

#### 제외되는 항목
- 일반적인 설명문, 목적문
- 배경 설명, 개념 설명
- 실행 불가능한 서술문

### 3. 카테고리 자동 분류
- 🔬 **품질관리**: 시험, 검사, 품질 확인
- ⚠️ **안전관리**: 안전장비, 안전조치, 위험 확인
- 🏗️ **시공관리**: 공정, 작업 순서, 시공 방법
- 📦 **자재관리**: 자재 반입, 자재 검수, 보관
- 📋 **제출서류**: 계획서, 시험성적서, 보고서 제출
- 📏 **측량/계측**: 측량, 계측, 치수 확인
- 📝 **일반관리**: 기타 항목

### 4. 체크리스트 형식

각 체크리스트는 다음 5가지 요소를 포함합니다:

```
✅ 레미콘 슬럼프 확인
   구분: 콘크리트 공사 > 콘크리트 품질관리
   점검기준: 시방서 기준 ±25mm 이내
   확인방법: 출하 시 측정, 시험 결과 기록 보관
   관련근거: p.12 3.2.1
   카테고리: 품질관리
```

### 5. 프린트 및 PDF 저장
- **Ctrl+Shift+P**: 프린트 미리보기
- **Ctrl+P**: 직접 프린트
- **파일 → PDF로 저장**: PDF 파일로 내보내기

---

## 📊 체크리스트 예시

### 입력: 시방서 원문
```
3.2 콘크리트 품질관리
3.2.1 레미콘 슬럼프 시험
출하 시 슬럼프를 측정하여 시방서 기준 ±25mm 이내임을 확인한다.
시험 결과는 기록 보관한다.
```

### 출력: 자동 생성된 체크리스트
```json
{
  "title": "콘크리트 공사",
  "children": [
    {
      "title": "콘크리트 품질관리",
      "checklist": [
        {
          "summary": "레미콘 슬럼프 확인",
          "detail": "출하 시 시방서 기준 ±25mm 이내인지 측정. 시험 결과 기록 보관. 관련근거: 3.2.1",
          "category": "품질관리",
          "keywords": ["슬럼프", "시험", "품질"]
        }
      ]
    }
  ]
}
```

---

## 🤖 AI 모드별 차이

| 항목 | AI 없음 | Ollama (무료) | OpenAI (유료) |
|------|---------|---------------|---------------|
| 시방서 분석 | ❌ | ✅ | ✅ |
| 체크리스트 생성 | 수동 | 자동 | 자동 |
| 분석 품질 | - | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
| 속도 | - | 30초~2분 | 5~15초 |
| 비용 | 무료 | 무료 | 유료 |
| 인터넷 필요 | ❌ | ❌ | ✅ |
| 데이터 보안 | ✅ | ✅ | ⚠️ |

---

## 💡 사용 팁

### 1. 시방서 준비
- **텍스트 기반 PDF**만 지원됩니다
- 스캔한 이미지 PDF는 OCR 처리가 필요합니다
- 깨끗한 PDF일수록 분석 정확도가 높습니다

### 2. 효과적인 분석
- 공종별로 PDF를 나누면 분석이 더 정확합니다
- 너무 긴 문서는 여러 번에 나누어 분석하세요
- 분석 후 결과를 검토하고 필요시 수정하세요

### 3. 체크리스트 관리
- 우선순위를 설정하여 중요도를 관리하세요
- 마감일을 입력하여 일정을 관리하세요
- 체크박스를 체크하여 진행 상황을 추적하세요

### 4. 진행 상황 모니터링
- **📊 진행 상황 분석** 버튼으로 전체 현황 확인
- **🎯 우선순위 정렬** 버튼으로 작업 순서 최적화
- 정기적으로 분석하여 지연 작업 파악

---

## 🔧 문제 해결

### "Ollama 연결 실패"
```bash
# Ollama 서버가 실행 중인지 확인
ollama serve

# 브라우저에서 확인
http://localhost:11434
```

### "모델을 찾을 수 없습니다"
```bash
# 모델 다운로드
ollama pull qwen2.5:7b

# 다운로드된 모델 확인
ollama list
```

### "PDF를 분석할 수 없습니다"
- 텍스트 기반 PDF인지 확인하세요
- 스캔한 이미지 PDF는 지원되지 않습니다
- Adobe Acrobat에서 텍스트 복사가 되는지 확인하세요

### 분석이 너무 느림
- Ollama는 GPU를 사용하면 더 빠릅니다
- 더 작은 모델 사용: `ollama pull qwen2.5:3b`
- 또는 OpenAI API 사용 고려

---

## 📁 파일 구조

```
risk-management-system/
├── src/
│   ├── main.py                          # 메인 프로그램
│   ├── models/
│   │   └── toggle_item.py              # 체크리스트 데이터 모델
│   ├── utils/
│   │   ├── pdf_parser.py               # PDF 텍스트 추출
│   │   ├── local_llm_analyzer.py       # Ollama AI 연동
│   │   ├── llm_analyzer.py             # OpenAI AI 연동
│   │   └── checklist_printer.py        # 프린트 기능
│   └── components/
│       └── analysis_dialog.py          # 분석 결과 UI
├── config/
│   └── document_structure_prompt.md    # 시방서 분석 시스템 프롬프트
├── 실행_Ollama.bat                      # Ollama 실행 배치 파일
└── README_건설시방서분석.md             # 이 파일
```

---

## 📖 관련 문서

- [AI 기능 사용 가이드](README_AI_FEATURES.md)
- [Ollama 설치 가이드](https://ollama.com/download)
- [시스템 프롬프트 커스터마이징](config/document_structure_prompt.md)

---

## 📝 시스템 프롬프트 수정

시방서 분석 방식을 수정하려면:

1. `config/document_structure_prompt.md` 파일 열기
2. 추출 키워드, 카테고리, 형식 등을 수정
3. 프로그램 재시작

---

## 🎓 지원

문제가 발생하면:
1. Ollama가 실행 중인지 확인
2. 모델이 다운로드되었는지 확인
3. PDF가 텍스트 기반인지 확인

---

**즐거운 시공 관리 되세요! 🏗️**
